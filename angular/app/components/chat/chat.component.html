<section layout="row" layout-fill style="background-color:white; overflow:hidden" >
    <md-sidenav
        class="md-sidenav-left"
        md-component-id="contacts-sidenav"
        md-is-locked-open="$mdMedia('gt-md')"
        >

            <md-content layout="column">
              <md-toolbar class="chat_toolbar" style="background-color:white">
                <input type="text" class="search_contacts" placeholder="Search">
              </md-toolbar>
              <md-divider></md-divider>
              <md-list class="contacts-list md-dense">
                <md-list-item ng-class="{convo_new:convo.new_message}" ng-click="vm.setActiveConversation(convo)" ng-click-xs="vm.closeContacts()" class="md-2-line" ng-repeat="convo in vm.conversations">
                    <img  class="md-avatar list-user-avatar" ng-src={{vm.ChatService.getConvoAvatar(convo)}}  alt="avatar" />
                    <div class="md-list-item-text" layout="column" layout-align="start start" >
                      <h3>{{convo | convoUsername}}</h3>
                      <p> {{convo.message | limitTo: 15}}</p>
                    </div>
                    <md-divider></md-divider>
                </md-list-item>
              </md-list>
            </md-content>
    </md-sidenav>

    <md-divider></md-divider>
    <md-content ng-show="vm.nonSelected()" class="messages_box"  layout="column" flex>
      <md-toolbar class="chat_toolbar" layout="row" layout-align="start center" layout-padding style="background-color:white">
        <md-button ng-click="vm.toggleContacts()" class="small-btn" style="color:grey">
          <img  class="toolbar-user-avatar" ng-src={{"/uploads/avatars/"+vm.activeRecipient.avatar}}  alt="avatar" />
          {{vm.activeRecipient | username}}
        </md-button>
        <span flex></span>
        <md-button hide-gt-md class="small-btn icon" ng-click="vm.toggleExchange()" style="color:grey">
          <md-icon md-font-icon="zmdi zmdi-pin-drop"></md-icon>
        </md-button>
        </md-button>
      </md-toolbar>
      <md-divider></md-divider>

      <!--
        _____________________________
       | Message Box                 |
       |_____________________________|
      -->
      <message-box conversations="vm.currentConversation" currentuser="vm.currentUser"></message-box>
      <md-divider></md-divider>
      <form name='mForm' ng-submit="vm.sendMessage()">
        <input  ng-model="vm.message" type="text" placeholder="Type a message..." style="width:100%; height:60px; border:none; padding:10px 0px 10px 10px">
      </form>
    </md-content>
    <md-content  ng-hide="vm.nonSelected()"flex layout="column">
      <md-toolbar class="chat_toolbar" layout="row" layout-align="start center" layout-padding style="background-color:white">
        <md-button ng-click="vm.toggleContacts()" class="small-btn" style="color:rgba(0,0,0,0.54);">
        <img  class="contact-user-avatar" ng-src={{"/uploads/avatars/avatar-5.png"}}  alt="avatar" />
        Contacts
        </md-button>
        <span flex></span>
        <md-button hide-gt-md class="small-btn icon" ng-click="vm.toggleExchange()" style="color:grey">
          <md-icon md-font-icon="zmdi zmdi-pin-drop"></md-icon>
        </md-button>
      </md-toolbar>
        <md-divider></md-divider>
      <md-content flex>

      </md-content>
    </md-content>
    <md-divider></md-divider>
    <!-- <md-content  layout="column" flex="20">
      <md-toolbar class="chat_toolbar" style="background-color:white">Exchange</md-toolbar>
      <md-divider></md-divider>
      <div flex></div>
    </md-content> -->


    <md-sidenav
      class="md-sidenav-right"
      md-component-id="exchange-sidenav"
        md-is-locked-open="$mdMedia('gt-md')">

        <md-content  layout="column">
          <md-toolbar class="chat_toolbar" style="background-color:white; color:grey; font-size:14px" layout="row" layout-align="center center">
            Exchange
          </md-toolbar>
          <md-divider></md-divider>
          <div flex></div>
        </md-content>

    </md-sidenav>
  </section>
